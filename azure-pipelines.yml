trigger:
- master
- releases/*

stages:
- stage: 'BuildSharedNpmWin'
  displayName: 'Windows - Build & Publish Shared Npm packages'
  dependsOn: []
  pool:
    vmImage: windows-2022
  condition: succeeded()
  jobs:
  - template: ci/build-common-packages.yml
    parameters:
      AgentOS: 'Windows'

- stage: 'BuildSharedNpmUbuntu'
  displayName: 'Ubuntu - Build Shared Npm packages'
  dependsOn: []
  pool:
    vmImage: 'ubuntu-20.04'
  condition: succeeded()
  jobs:
  - template: ci/build-common-packages.yml
    parameters:
      AgentOS: 'Ubuntu'

- stage: 'BuildSharedNpmMac'
  displayName: 'MacOS - Build Shared Npm packages'
  dependsOn: []
  pool:
    vmImage: 'macos-12'
  condition: succeeded()
  jobs:
  - template: ci/build-common-packages.yml
    parameters:
      AgentOS: 'MacOS'